{"file":"facilities-D9uBav9y.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOI,QAAA,EAAE,SAAS;AAEf,QAAI,2BAA2B;AAAA,MAC7B,EAAE,OAAO;AAAA,QACP,MAAM,EAAE,SAAS,IAAI,CAAC;AAAA,MAAA,CACvB;AAAA,IAAA;AAGH,QAAI,qBAAqB,QAAQ;AAAA,MAC/B,kBAAkB;AAAA,IAAA,CACnB;AAEgC,uBAAmB;AAAA,MAClD,OAAO,WAAW;AAChB,cAAM,KAAK,aAAa;AAAA,UACtB,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,QAAA,CACD;AAEK,cAAA;AAAA,UACJ,OAAO;AAAA,QAAA,CACR;AAEO;MACV;AAAA,IACF;AAEA,QAAI,EAAE,MAAM,YAAY,aAAY,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM,OAAO,eAAa,aAAA,CAAA;AAE9D,wBAAoB,CAAC,UAAU;AACzB,UAAA,CAAC,MAAM,OAAO,aAAa;AACrB;MACV;AAAA,IAAA,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":["_withAsyncContext"],"sources":["../../../../pages/keywords/facilities.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { toTypedSchema } from \"@vee-validate/zod\"\nimport { useForm } from \"vee-validate\"\nimport { z } from \"zod\"\nimport { Button } from \"~/components/ui/button\"\nimport { toast } from \"~/components/ui/toast\"\n\nlet { $api } = useNuxtApp()\n\nlet createFacilityFormSchema = toTypedSchema(\n  z.object({\n    name: z.string().min(2),\n  }),\n)\n\nlet createFacilityForm = useForm({\n  validationSchema: createFacilityFormSchema,\n})\n\nlet onSubmitCreateFacilityForm = createFacilityForm.handleSubmit(\n  async (values) => {\n    await $api(\"/facility\", {\n      method: \"post\",\n      body: values,\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n\n    toast({\n      title: \"Facility created\",\n    })\n\n    refresh()\n  },\n)\n\nlet { data: facilities, refresh } = await useApi(\"/facilities\")\n\nonBeforeRouteUpdate((guard) => {\n  if (!guard.params.facility_id) {\n    refresh()\n  }\n})\n</script>\n\n<template>\n  <div class=\"mx-auto grid grid-cols-2 gap-12\">\n    <div>\n      <div\n        class=\"uppercase text-muted-foreground text-xs font-semibold tracking-wider\"\n      >\n        Facilities\n      </div>\n      <div class=\"mt-3\">\n        <Lister>\n          <ListerItem\n            v-for=\"facility in facilities\"\n            :key=\"facility.id\"\n            :to=\"`/keywords/facilities/${facility.id}`\"\n          >\n            {{ facility.name }}\n          </ListerItem>\n        </Lister>\n\n        <hr class=\"my-8\" />\n\n        <form\n          @submit=\"onSubmitCreateFacilityForm\"\n          class=\"flex items-end gap-1.5 w-full\"\n        >\n          <FormField v-slot=\"{ componentField }\" name=\"name\">\n            <FormItem class=\"w-full\">\n              <FormLabel>Add facility</FormLabel>\n              <FormControl>\n                <Input type=\"text\" v-bind=\"componentField\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          </FormField>\n\n          <Button type=\"submit\" class=\"mt-3\">Create</Button>\n        </form>\n      </div>\n    </div>\n\n    <div>\n      <NuxtPage />\n    </div>\n  </div>\n</template>\n"],"version":3}