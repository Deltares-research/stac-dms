{"version":3,"file":"index-BiFWa9Ui.js","sources":["../../../../pages/items/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { PlusIcon, ArrowUpDown, Pencil, Trash2 } from \"lucide-vue-next\"\nimport type { ColumnDef } from \"@tanstack/vue-table\"\nimport type { components } from \"#open-fetch-schemas/api\"\nimport { Button } from \"@/components/ui/button\"\nimport DataTable from \"@/components/table/DataTable.vue\"\nimport dateFormat from \"dateformat\"\n\nlet { data: items, refresh } = await useApi(\"/search?limit=1000\")\n\nonMounted(async () => {\n  await new Promise((r) => setTimeout(r, 1000))\n  await refresh()\n})\nconst router = useRouter()\nconst collectionColumns: ColumnDef<\n  components[\"schemas\"][\"stac_pydantic__api__item_collection__ItemCollection\"]\n>[] = [\n  {\n    accessorKey: \"properties.title\",\n    id: \"properties.title\",\n    header: ({ column }) => {\n      return h(\n        Button,\n        {\n          variant: \"ghost\",\n          onClick: () => {\n            column.toggleSorting(column.getIsSorted() === \"asc\")\n          },\n        },\n        () => [\"Title\", h(ArrowUpDown, { class: \"ml-2 h-4 w-4\" })],\n      )\n    },\n    cell: ({ row }) => {\n      return (\n        h(\"div\", { class: \"lowercase\" }, row.original.properties.title) ?? \"\"\n      )\n    },\n  },\n  {\n    accessorKey: \"properties.description\",\n    header: ({ column }) => {\n      return h(\n        Button,\n        {\n          variant: \"ghost\",\n          onClick: () => column.toggleSorting(column.getIsSorted() === \"asc\"),\n        },\n        () => [\"Description\", h(ArrowUpDown, { class: \"ml-2 h-4 w-4\" })],\n      )\n    },\n    cell: ({ row }) => {\n      return h(\n        \"div\",\n        { class: \"lowercase\" },\n        row.original.properties.description ?? \"\",\n      )\n    },\n  },\n  {\n    accessorKey: \"collection\",\n    header: ({ column }) => {\n      return h(\n        Button,\n        {\n          variant: \"ghost\",\n          onClick: () => column.toggleSorting(column.getIsSorted() === \"asc\"),\n        },\n        () => [\"Collection\", h(ArrowUpDown, { class: \"ml-2 h-4 w-4\" })],\n      )\n    },\n    cell: ({ row }) => {\n      return h(\"div\", { class: \"lowercase\" }, row.original.collection)\n    },\n  },\n  {\n    accessorKey: \"properties.storagelocation\",\n    header: ({ column }) => {\n      return h(\n        Button,\n        {\n          variant: \"ghost\",\n          onClick: () => column.toggleSorting(column.getIsSorted() === \"asc\"),\n        },\n        () => [\"Storage location\", h(ArrowUpDown, { class: \"ml-2 h-4 w-4\" })],\n      )\n    },\n    cell: ({ row }) => {\n      return h(\n        \"div\",\n        { class: \"lowercase\" },\n        row.original.properties.storagelocation,\n      )\n    },\n  },\n  {\n    accessorKey: \"properties.datetime\",\n    header: ({ column }) => {\n      return h(\n        Button,\n        {\n          variant: \"ghost\",\n          onClick: () => column.toggleSorting(column.getIsSorted() === \"asc\"),\n        },\n        () => [\"Date\", h(ArrowUpDown, { class: \"ml-2 h-4 w-4\" })],\n      )\n    },\n    cell: ({ row }) => {\n      const date = dateFormat(\n        row.original.properties.datetime,\n        \"dd-mm-yyyy hh:MM:ss\",\n      )\n      return h(\"div\", { class: \"lowercase\" }, date)\n    },\n  },\n  {\n    id: \"edit\",\n    cell: ({ row }) => {\n      return h(\n        Button,\n        {\n          variant: \"ghost\",\n          onClick: () => {\n            router.push(\"/items/\" + row.original.id)\n          },\n        },\n        () => [\"Edit\", h(Pencil, { class: \"ml-2 h-4 w-4\" })],\n      )\n    },\n  },\n  {\n    id: \"delete\",\n    cell: ({ row }) => {\n      return h(\n        Button,\n        {\n          variant: \"ghost\",\n          onClick: () => {\n            router.push(\"/items/delete/\" + row.original.id)\n          },\n        },\n        () => [\"Delete\", h(Trash2, { class: \"ml-2 h-4 w-4\" })],\n      )\n    },\n  },\n]\n</script>\n\n<template>\n  <Card class=\"mt-5\">\n    <CardHeader>\n      <CardTitle>Registered data</CardTitle>\n      <CardDescription\n        >List of data sets registrations, which you are allowed to edit\n      </CardDescription>\n    </CardHeader>\n    <CardContent>\n      <div class=\"flex justify-end\">\n        <Button as-child>\n          <NuxtLink to=\"/items/create\" class=\"flex items-center gap-1\">\n            <PlusIcon class=\"w-4 h-4 mr-2\" />\n            Register new dataset\n          </NuxtLink>\n        </Button>\n      </div>\n      <div class=\"flex justify-end\"></div>\n      <DataTable\n        v-if=\"items.features\"\n        :columns=\"collectionColumns\"\n        :data=\"items.features\"\n        filterId=\"properties.title\"\n      />\n    </CardContent>\n  </Card>\n</template>\n"],"names":["_withAsyncContext","Button"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,QAAI,EAAE,MAAM,OAAO,aAAkB,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,OAAO,mCAAoB,CAAA;AAMhE,UAAM,SAAS;AACf,UAAM,oBAEA;AAAA,MACJ;AAAA,QACE,aAAa;AAAA,QACb,IAAI;AAAA,QACJ,QAAQ,CAAC,EAAE,aAAa;AACf,iBAAA;AAAA,YACLC;AAAAA,YACA;AAAA,cACE,SAAS;AAAA,cACT,SAAS,MAAM;AACb,uBAAO,cAAc,OAAO,YAAY,MAAM,KAAK;AAAA,cACrD;AAAA,YACF;AAAA,YACA,MAAM,CAAC,SAAS,EAAE,aAAa,EAAE,OAAO,eAAe,CAAC,CAAC;AAAA,UAAA;AAAA,QAE7D;AAAA,QACA,MAAM,CAAC,EAAE,UAAU;AAEf,iBAAA,EAAE,OAAO,EAAE,OAAO,YAAA,GAAe,IAAI,SAAS,WAAW,KAAK,KAAK;AAAA,QAEvE;AAAA,MACF;AAAA,MACA;AAAA,QACE,aAAa;AAAA,QACb,QAAQ,CAAC,EAAE,aAAa;AACf,iBAAA;AAAA,YACLA;AAAAA,YACA;AAAA,cACE,SAAS;AAAA,cACT,SAAS,MAAM,OAAO,cAAc,OAAO,kBAAkB,KAAK;AAAA,YACpE;AAAA,YACA,MAAM,CAAC,eAAe,EAAE,aAAa,EAAE,OAAO,eAAe,CAAC,CAAC;AAAA,UAAA;AAAA,QAEnE;AAAA,QACA,MAAM,CAAC,EAAE,UAAU;AACV,iBAAA;AAAA,YACL;AAAA,YACA,EAAE,OAAO,YAAY;AAAA,YACrB,IAAI,SAAS,WAAW,eAAe;AAAA,UAAA;AAAA,QAE3C;AAAA,MACF;AAAA,MACA;AAAA,QACE,aAAa;AAAA,QACb,QAAQ,CAAC,EAAE,aAAa;AACf,iBAAA;AAAA,YACLA;AAAAA,YACA;AAAA,cACE,SAAS;AAAA,cACT,SAAS,MAAM,OAAO,cAAc,OAAO,kBAAkB,KAAK;AAAA,YACpE;AAAA,YACA,MAAM,CAAC,cAAc,EAAE,aAAa,EAAE,OAAO,eAAe,CAAC,CAAC;AAAA,UAAA;AAAA,QAElE;AAAA,QACA,MAAM,CAAC,EAAE,UAAU;AACV,iBAAA,EAAE,OAAO,EAAE,OAAO,eAAe,IAAI,SAAS,UAAU;AAAA,QACjE;AAAA,MACF;AAAA,MACA;AAAA,QACE,aAAa;AAAA,QACb,QAAQ,CAAC,EAAE,aAAa;AACf,iBAAA;AAAA,YACLA;AAAAA,YACA;AAAA,cACE,SAAS;AAAA,cACT,SAAS,MAAM,OAAO,cAAc,OAAO,kBAAkB,KAAK;AAAA,YACpE;AAAA,YACA,MAAM,CAAC,oBAAoB,EAAE,aAAa,EAAE,OAAO,eAAe,CAAC,CAAC;AAAA,UAAA;AAAA,QAExE;AAAA,QACA,MAAM,CAAC,EAAE,UAAU;AACV,iBAAA;AAAA,YACL;AAAA,YACA,EAAE,OAAO,YAAY;AAAA,YACrB,IAAI,SAAS,WAAW;AAAA,UAAA;AAAA,QAE5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,aAAa;AAAA,QACb,QAAQ,CAAC,EAAE,aAAa;AACf,iBAAA;AAAA,YACLA;AAAAA,YACA;AAAA,cACE,SAAS;AAAA,cACT,SAAS,MAAM,OAAO,cAAc,OAAO,kBAAkB,KAAK;AAAA,YACpE;AAAA,YACA,MAAM,CAAC,QAAQ,EAAE,aAAa,EAAE,OAAO,eAAe,CAAC,CAAC;AAAA,UAAA;AAAA,QAE5D;AAAA,QACA,MAAM,CAAC,EAAE,UAAU;AACjB,gBAAM,OAAO;AAAA,YACX,IAAI,SAAS,WAAW;AAAA,YACxB;AAAA,UAAA;AAEF,iBAAO,EAAE,OAAO,EAAE,OAAO,YAAA,GAAe,IAAI;AAAA,QAC9C;AAAA,MACF;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,MAAM,CAAC,EAAE,UAAU;AACV,iBAAA;AAAA,YACLA;AAAAA,YACA;AAAA,cACE,SAAS;AAAA,cACT,SAAS,MAAM;AACb,uBAAO,KAAK,YAAY,IAAI,SAAS,EAAE;AAAA,cACzC;AAAA,YACF;AAAA,YACA,MAAM,CAAC,QAAQ,EAAE,QAAQ,EAAE,OAAO,eAAe,CAAC,CAAC;AAAA,UAAA;AAAA,QAEvD;AAAA,MACF;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,MAAM,CAAC,EAAE,UAAU;AACV,iBAAA;AAAA,YACLA;AAAAA,YACA;AAAA,cACE,SAAS;AAAA,cACT,SAAS,MAAM;AACb,uBAAO,KAAK,mBAAmB,IAAI,SAAS,EAAE;AAAA,cAChD;AAAA,YACF;AAAA,YACA,MAAM,CAAC,UAAU,EAAE,QAAQ,EAAE,OAAO,eAAe,CAAC,CAAC;AAAA,UAAA;AAAA,QAEzD;AAAA,MACF;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}