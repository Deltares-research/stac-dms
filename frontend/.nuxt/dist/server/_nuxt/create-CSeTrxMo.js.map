{"version":3,"file":"create-CSeTrxMo.js","sources":["../../../../pages/collections/create.vue"],"sourcesContent":["<template>\n  <div class=\"justify-end\">\n    <CollectionCardForm\n      button-title=\"Create\"\n      card-title=\"Create a new collection\"\n      @update=\"createCollection\"\n      :errors=\"errors\"\n      collectionType=\"experimentalFacility\"\n      keywordFacility=\"No keywords\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Collection } from \"@/lib/collection\"\nimport CollectionCardForm from \"@/components/collections/CollectionCardForm.vue\"\nimport { useNuxtApp, useRouter } from \"nuxt/app\"\nimport { ref } from \"vue\"\n\nconst errors = ref(\"\")\nconst { $api } = useNuxtApp()\nconst title = ref(\"\")\nconst description = ref(\"\")\n\nasync function createCollection(emitedCollection: Collection) {\n  const newCollection = {\n    type: \"Collection\",\n    stac_version: \"1.0.0\",\n    id: emitedCollection.title,\n    title: emitedCollection.title,\n    description: emitedCollection.description,\n    keywords: [emitedCollection.collectionType],\n    license: \"proprietary\",\n    extent: {\n      spatial: {\n        bbox: [[-180, -56, 180, 83]],\n      },\n      temporal: {\n        interval: [[]],\n      },\n    },\n    links: [],\n  }\n  if (emitedCollection.keywordsFacility !== \"No keywords\") {\n    newCollection.links.push({\n      rel: \"keywords\",\n      href: \"/facilities/\" + emitedCollection.keywordsFacility,\n      type: \"application/json\",\n      id: emitedCollection.keywordsFacility,\n    })\n  }\n  try {\n    errors.value = \"\"\n    const data = await $api(\"/collections\", {\n      method: \"POST\",\n      body: newCollection,\n    })\n  } catch (e) {\n    errors.value = \"It was not possible to create the collection\"\n    return\n  }\n  const router = useRouter()\n  router.push(\"/collections\")\n}\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBM,UAAA,SAAS,IAAI,EAAE;AACf,UAAA,EAAE,SAAS;AACH,QAAI,EAAE;AACA,QAAI,EAAE;AAE1B,mBAAe,iBAAiB,kBAA8B;AAC5D,YAAM,gBAAgB;AAAA,QACpB,MAAM;AAAA,QACN,cAAc;AAAA,QACd,IAAI,iBAAiB;AAAA,QACrB,OAAO,iBAAiB;AAAA,QACxB,aAAa,iBAAiB;AAAA,QAC9B,UAAU,CAAC,iBAAiB,cAAc;AAAA,QAC1C,SAAS;AAAA,QACT,QAAQ;AAAA,UACN,SAAS;AAAA,YACP,MAAM,CAAC,CAAC,MAAM,KAAK,KAAK,EAAE,CAAC;AAAA,UAC7B;AAAA,UACA,UAAU;AAAA,YACR,UAAU,CAAC,CAAA,CAAE;AAAA,UACf;AAAA,QACF;AAAA,QACA,OAAO,CAAC;AAAA,MAAA;AAEN,UAAA,iBAAiB,qBAAqB,eAAe;AACvD,sBAAc,MAAM,KAAK;AAAA,UACvB,KAAK;AAAA,UACL,MAAM,iBAAiB,iBAAiB;AAAA,UACxC,MAAM;AAAA,UACN,IAAI,iBAAiB;AAAA,QAAA,CACtB;AAAA,MACH;AACI,UAAA;AACF,eAAO,QAAQ;AACT,cAAA,OAAO,MAAM,KAAK,gBAAgB;AAAA,UACtC,QAAQ;AAAA,UACR,MAAM;AAAA,QAAA,CACP;AAAA,eACM,GAAG;AACV,eAAO,QAAQ;AACf;AAAA,MACF;AACA,YAAM,SAAS;AACf,aAAO,KAAK,cAAc;AAAA,IAC5B;;;;;;;;;;;;;;;;;;;;;"}