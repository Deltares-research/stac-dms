import{_ as $,a as S,b as A}from"./C52_cgDU.js";import{_ as D}from"./Bel14yrg.js";import{_ as N}from"./BJTLxclH.js";import{m as T,q as I,u as V,r as K,v as b,x as B,o as L,n as P,w as a,b as l,d,a as E,y as M,z as j,A as s,_ as q,p as r}from"./31PJL3iA.js";import{_ as z,A as c,P as H}from"./C8otNmv6.js";import{c as Q}from"./BbUVoc-8.js";import{T as R}from"./C4Cv-8kp.js";import"./CFwNVicP.js";const U={class:"flex justify-end"},te=T({__name:"index",async setup(Z){let i,u;const _=I(),{$api:p}=V(),m=K([]);let{data:f}=([i,u]=b(()=>j("/facilities","$oQZmD9LkdM")),i=await i,u(),i);B(async()=>{await new Promise(o=>setTimeout(o,1e3));let e=[],t="/collections";for(;t;){let o=t.search("/api");t=o!=-1?t.substring(o):t,t=await g(t,e)}m.value=e});async function g(e,t){try{const o=await p(e);return o.collections.forEach(n=>t.push(n)),o.links[3].href}catch{return""}}async function w(e){_.push("/collections/update/"+e)}async function h(e){_.push("/collections/delete/"+e)}const y=[{accessorKey:"title",header:({column:e})=>s(r,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc")},()=>["Title",s(c,{class:"ml-2 h-4 w-4"})]),cell:({row:e})=>e.getValue("title")},{accessorKey:"description",header:({column:e})=>s(r,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc")},()=>["Description",s(c,{class:"ml-2 h-4 w-4"})]),cell:({row:e})=>e.getValue("description")},{accessorKey:"keywords",header:({column:e})=>s(r,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc")},()=>["Collection type",s(c,{class:"ml-2 h-4 w-4"})]),cell:({row:e})=>{const t=e.getValue("keywords")[0];return Q.find(n=>n.value==t).label}},{accessorKey:"links",header:({column:e})=>s(r,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc")},()=>["Keywords",s(c,{class:"ml-2 h-4 w-4"})]),cell:({row:e})=>{const t=e.original.links.find(n=>n.rel=="keywords");if(t===void 0)return"No keywords";const o=f.value.find(n=>n.id==t.id);return o===void 0?"No keywords":o.name}},{id:"edit",cell:({row:e})=>s(r,{variant:"ghost",onClick:()=>{w(e.original.id)}},()=>["Edit",s(H,{class:"ml-2 h-4 w-4"})])},{id:"delete",cell:({row:e})=>s(r,{variant:"ghost",onClick:()=>{h(e.original.id)}},()=>["Delete",s(R,{class:"ml-2 h-4 w-4"})])}];return(e,t)=>{const o=$,n=D,k=S,C=q,v=N,x=A;return L(),P(x,null,{default:a(()=>[l(k,null,{default:a(()=>[l(o,null,{default:a(()=>t[0]||(t[0]=[d("Collections")])),_:1}),l(n,null,{default:a(()=>t[1]||(t[1]=[d("List of data sets collections, which you are allowed to edit ")])),_:1})]),_:1}),l(v,null,{default:a(()=>[E("div",U,[l(M(r),null,{default:a(()=>[l(C,{to:"/collections/create"},{default:a(()=>t[2]||(t[2]=[d("Add collection")])),_:1})]),_:1})]),l(z,{columns:y,data:m.value},null,8,["data"])]),_:1})]),_:1})}}});export{te as default};
