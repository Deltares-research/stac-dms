import{ao as I,m,u as B,aO as v,ak as oe,o as d,c as _,b as a,w as i,y as e,p as C,d as F,t as T,a3 as ne,a5 as K,n as f,F as y,L as D,M as j,aQ as le,aR as ie,D as k,E as P,aS as re,G as g,H as h,aT as ce,aU as de,aV as ue,U as pe,aW as me,aX as fe,a as S,aY as _e,aZ as ye,a_ as he,a$ as ge,b0 as we,v as z,V as O,W as A,z as G,B as M,s as ke}from"./31PJL3iA.js";import{u as L,t as N,z as $,a as be,_ as xe,b as Se,c as R,F as E}from"./BKrGdL83.js";import{T as Fe}from"./C4Cv-8kp.js";import{C as W}from"./AbVsqMK9.js";import{_ as $e}from"./CFwNVicP.js";import"./Ci65v0pw.js";/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=I("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=I("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ve=m({__name:"DeleteFacility",props:{facility_id:{}},setup(s){let{$api:t}=B(),o=L().handleSubmit(async()=>{await t("/facility/{facility_id}",{method:"delete",path:{facility_id:s.facility_id}}),v({title:"Facility deleted"}),await oe("/keywords/facilities")});return(n,l)=>{const c=C;return d(),_("form",{onSubmit:l[0]||(l[0]=(...p)=>e(o)&&e(o)(...p))},[a(c,{variant:"outline",size:"icon",type:"submit",class:"w-8 h-8"},{default:i(()=>[a(e(Fe),{class:"w-4 h-4"})]),_:1})],32)}}}),Ce=m({__name:"FacilityGroupLink",props:{facility_id:{},onUnlink:{type:Function},group:{}},setup(s){let{$api:t}=B(),o=L().handleSubmit(async n=>{await t("/facility_keywordgroup_link",{method:"delete",body:{keyword_group_id:s.group.id,facility_id:s.facility_id}}),v({title:"Keyword group unlinked"}),s.onUnlink()});return(n,l)=>{const c=C;return d(),_("form",{onSubmit:l[0]||(l[0]=(...p)=>e(o)&&e(o)(...p)),class:"rounded bg-gray-100 flex items-center justify-between gap-3 px-4 py-0.5"},[F(T(n.group.group_name_nl)+" ",1),a(c,{variant:"link",size:"sm",type:"submit",class:"hover:text-red-500"},{default:i(()=>[a(e(ne),{class:"w-4 h-4"})]),_:1})],32)}}}),Pe=m({__name:"Select",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(s,{emit:t}){const n=K(s,t);return(l,c)=>(d(),f(e(le),D(j(e(n))),{default:i(()=>[y(l.$slots,"default")]),_:3},16))}}),Le=m({__name:"SelectValue",props:{placeholder:{},asChild:{type:Boolean},as:{}},setup(s){const t=s;return(r,o)=>(d(),f(e(ie),D(j(t)),{default:i(()=>[y(r.$slots,"default")]),_:3},16))}}),Ve=m({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,r=k(()=>{const{class:n,...l}=t;return l}),o=P(r);return(n,l)=>(d(),f(e(ce),g(e(o),{class:e(h)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t.class)}),{default:i(()=>[y(n.$slots,"default"),a(e(re),{"as-child":""},{default:i(()=>[a(e(q),{class:"w-4 h-4 opacity-50"})]),_:1})]),_:3},16,["class"]))}}),Ue=m({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{default:"popper"},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(s,{emit:t}){const r=s,o=t,n=k(()=>{const{class:c,...p}=r;return p}),l=K(n,o);return(c,p)=>(d(),f(e(me),null,{default:i(()=>[a(e(de),g({...e(l),...c.$attrs},{class:e(h)("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",c.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r.class)}),{default:i(()=>[a(e(je)),a(e(ue),{class:pe(e(h)("p-1",c.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:i(()=>[y(c.$slots,"default")]),_:3},8,["class"]),a(e(Ie))]),_:3},16,["class"])]),_:3}))}}),ze=m({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,r=k(()=>{const{class:o,...n}=t;return n});return(o,n)=>(d(),f(e(fe),g({class:e(h)("p-1 w-full",t.class)},r.value),{default:i(()=>[y(o.$slots,"default")]),_:3},16,["class"]))}}),Ge={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},De=m({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,r=k(()=>{const{class:n,...l}=t;return l}),o=P(r);return(n,l)=>(d(),f(e(he),g(e(o),{class:e(h)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t.class)}),{default:i(()=>[S("span",Ge,[a(e(_e),null,{default:i(()=>[a(e(W),{class:"h-4 w-4"})]),_:1})]),a(e(ye),null,{default:i(()=>[y(n.$slots,"default")]),_:3})]),_:3},16,["class"]))}}),je=m({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,r=k(()=>{const{class:n,...l}=t;return l}),o=P(r);return(n,l)=>(d(),f(e(ge),g(e(o),{class:e(h)("flex cursor-default items-center justify-center py-1",t.class)}),{default:i(()=>[y(n.$slots,"default",{},()=>[a(e(Be),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),Ie=m({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,r=k(()=>{const{class:n,...l}=t;return l}),o=P(r);return(n,l)=>(d(),f(e(we),g(e(o),{class:e(h)("flex cursor-default items-center justify-center py-1",t.class)}),{default:i(()=>[y(n.$slots,"default",{},()=>[a(e(q),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),Te=m({__name:"LinkKeywordGroup",props:{facility_id:{},onLink:{type:Function}},async setup(s){let t,r,{data:o}=([t,r]=z(()=>G("/keywordgroups","$g0GRcBOKMh")),t=await t,r(),t),{$api:n}=B(),l=N($.object({keyword_group_id:$.string()})),p=L({validationSchema:l}).handleSubmit(async b=>{var u;await n("/facility_keywordgroup_link",{method:"post",body:{...b,facility_id:s.facility_id}}),v({title:"Keyword group linked"}),(u=s.onLink)==null||u.call(s)});return(b,u)=>{const w=be,x=Le,Q=Ve,X=xe,Z=De,H=ze,Y=Ue,J=Pe,ee=Se,te=R,ae=E,se=C;return d(),_("form",{onSubmit:u[0]||(u[0]=(...V)=>e(p)&&e(p)(...V)),class:"flex items-end gap-1.5 w-full"},[a(ae,{name:"keyword_group_id"},{default:i(({componentField:V})=>[a(te,{class:"w-full"},{default:i(()=>[a(w,null,{default:i(()=>u[1]||(u[1]=[F("Link keyword group")])),_:1}),a(J,D(j(V)),{default:i(()=>[a(X,null,{default:i(()=>[a(Q,null,{default:i(()=>[a(x,{placeholder:"Select a keyword group"})]),_:1})]),_:1}),a(Y,null,{default:i(()=>[a(H,null,{default:i(()=>[(d(!0),_(O,null,A(e(o),U=>(d(),f(Z,{key:U.id,value:U.id},{default:i(()=>[F(T(U.group_name_nl),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:2},1040),a(ee)]),_:2},1024)]),_:1}),a(se,{type:"submit"},{default:i(()=>u[2]||(u[2]=[F("Link")])),_:1})],32)}}}),Ke=m({__name:"UpdateFacility",props:{facility:{},onUpdate:{type:Function}},setup(s){let{$api:t}=B(),r=N($.object({name:$.string().min(2)})),o=L({validationSchema:r,initialValues:{name:s.facility.name??void 0}}),n=o.handleSubmit(async l=>{var c;await t("/facility/{facility_id}",{method:"put",body:l,path:{facility_id:s.facility.id??""}}),v({title:"Facility updated"}),(c=s.onUpdate)==null||c.call(s)});return(l,c)=>{const p=$e,b=R,u=E,w=C;return d(),_("form",{onSubmit:c[0]||(c[0]=(...x)=>e(n)&&e(n)(...x)),class:"flex items-center gap-1.5 w-full"},[a(u,{name:"name"},{default:i(({componentField:x})=>[a(b,{class:"w-full"},{default:i(()=>[a(p,g(x,{class:"border-0 -ml-3 h-8 !ring-0 rounded-none outline-none text-2xl font-bold"}),null,16)]),_:2},1024)]),_:1}),e(o).isFieldDirty("name")?(d(),f(w,{key:0,type:"submit",variant:"outline",size:"icon",class:"flex-shrink-0 w-8 h-8"},{default:i(()=>[a(e(W),{class:"w-4 h-4 text-emerald-500"})]),_:1})):M("",!0)],32)}}}),Oe={key:0},Ae={class:"mt-3 flex items-center justify-between gap-1.5"},Me={class:"mt-5 flex flex-col gap-1"},Xe=m({__name:"[facility_id]",async setup(s){let t,r,o=ke(),n=o.params.facility_id,{data:l}=([t,r]=z(()=>G("/facility/{facility_id}",{path:{facility_id:o.params.facility_id}},"$FREVjx8gWe")),t=await t,r(),t),{data:c,refresh:p}=([t,r]=z(()=>G("/keywords",{query:{facility_id:o.params.facility_id}},"$QSZv7QaKSa")),t=await t,r(),t);return(b,u)=>e(l)?(d(),_("div",Oe,[u[0]||(u[0]=S("div",{class:"uppercase text-muted-foreground text-xs font-semibold tracking-wider"}," Facility ",-1)),S("div",Ae,[a(Ke,{facility:e(l)},null,8,["facility"]),a(ve,{facility_id:e(n)},null,8,["facility_id"])]),S("ul",Me,[(d(!0),_(O,null,A(e(c),w=>(d(),_("li",{key:w.id},[a(Ce,{group:w,facility_id:e(n),onUnlink:e(p)},null,8,["group","facility_id","onUnlink"])]))),128))]),u[1]||(u[1]=S("hr",{class:"my-8"},null,-1)),a(Te,{facility_id:e(o).params.facility_id,onLink:e(p)},null,8,["facility_id","onLink"])])):M("",!0)}});export{Xe as default};
